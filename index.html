<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>开学倒计时</title>
   
</head>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
    div>h3{
        color: aliceblue;
    }
    div>P{
        margin-top:10px;
    }
    #box{
        width: 200px;
        /* height: 300px; */
        margin: 100px auto;
        background-color: crimson;
        text-align: center;
        padding: 10px;
        color: #cdcdcd;
    }
    svg{
        margin-top: 20px;
        margin-bottom: 10px;
    }
    #box>.time{
        display: flex;
        justify-content: center;
    }
    .time>div{
        width: 40px;
        height: 40px;
        background-color: #333333;
        line-height: 40px;
        text-align: center;
        font-weight: bold;
        position: relative;
    }
    .time>.minutes{
        margin-left: 10px;
        margin-right: 10px;
    }
    .time>div::before{
        content: "";
        display: block;
        width: 100%;
        height: 2px;
        background:red;
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
    }
    </style>
<body>
    <div id="box">
        <h3>要开学了</h3>
        <p>START LEARNING</p>
        <i class="icon-flash"></i>
        <P>假期余额还有：</P>
        <svg t="1566888469033" class="icon-flash" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5266" id="mx_n_1566888469034" width="80px" height="80px">
            <path d="M867.52 0L288 382.56l179.36 103.52L156.8 1024l579.52-382.56-179.36-103.52z" fill="#f3c03a" p-id="5267">
            </path>
        </svg>
        <div class="time">
            <div class="hours">00</div>
            <div class="minutes">00</div>
            <div class="seconds">00</div>
        </div>
    </div>
    <script>
        //1. 获取需要操作的元素
        let oHour = document.querySelector(".time>.hours");//思考：这里为什么没拿到元素？加了item之后就拿到了元素。
        let oMinutes = document.querySelector(".time>.minutes");
        let oSeconds = document.querySelector(".time>.seconds");

        //2. 获取时间的差值
        let remData = new Date("2019-8-28 17:30:00");
        setTime(remData.valueOf(),new Date().valueOf());

        setInterval(function(){
            setTime(remData.valueOf(),new Date().valueOf());
        },1000);
        function setTime(remData){
            let obj = getGapTime(remData.valueOf(),new Date().valueOf());  
            oHour.innerText = obj.hour;
            oMinutes.innerText = obj.minutes;
            oSeconds.innerText = obj.seconds;
        }
        let obj = getGapTime(remData.valueOf(),new Date().valueOf());  

        //3. 将差值设置给元素
        function getGapTime(preData,curData){
            //思考，为什么下面不能给定初始值？
            // let preData = new Date("2019-10-18 9:00:04");
            // let curData = new Date("2020-8-27 11:40:00");
            let gapSeconds = (preData - curData)/1000;
            let day = parseInt(gapSeconds/(60*60*24));
            day = day >= 10? day : "0" + day;
            let hour = parseInt(gapSeconds/(60*60)%24);
            hour = hour >= 10? hour : ("0"+hour);
            let minutes = parseInt(gapSeconds/60%60);
            minutes = minutes >= 10? minutes : "0" + minutes;
            let seconds = parseInt(gapSeconds%60);
            seconds = seconds >= 10? seconds : "0" + seconds;
        return {
            day:day,
            hour:hour,
            minutes:minutes,
            seconds:seconds,
        }
    }
    
    </script>
</body>
</html>
